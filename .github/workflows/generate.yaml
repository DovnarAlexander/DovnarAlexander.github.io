---

name: Preparation
on:
  pull_request:
    branches: [ master ]

jobs:
  preparation:
    name: Artifacts preparation
    runs-on: ubuntu-latest
    steps:
      - name: Check out Git repository
        uses: actions/checkout@v2
      - name: Run generation script
        run: |
          apt-get install python3-dev python3-pip python3-venv python3-wheel -y
          pip install wheel
          pip install -r scripts/requirements.txt
          python scripts/generate.py
      - uses: EndBug/add-and-commit@v4
        with:
          add: '*.html'
          author_name: DovnarAlexander
          author_email: 29893487+DovnarAlexander@users.noreply.github.com
          force: true
          signoff: true
          message: 'Generated HTML pages'
